"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class UserLandTracer {
    constructor(tracer, fallbackSpan) {
        this.tracer = tracer;
        this.fallbackSpan = fallbackSpan;
        this.fallbackSpanLock = false;
    }
    lockFallbackSpan() {
        this.fallbackSpanLock = true;
    }
    setFallbackSpan(newSpan) {
        if (this.fallbackSpanLock) {
            throw new Error(`FallbackSpan is locked, can't change it`);
        }
        this.fallbackSpan = newSpan;
    }
    startSpan(name, options = {}) {
        if (!options.childOf) {
            return this.tracer.startSpan(name, { ...options, childOf: this.fallbackSpan });
        }
        return this.tracer.startSpan(name, options);
    }
    inject(spanContext, format, carrier) {
        return this.tracer.inject(spanContext, format, carrier);
    }
    fallbackSpanContext() {
        return this.fallbackSpan.context();
    }
}
exports.UserLandTracer = UserLandTracer;
